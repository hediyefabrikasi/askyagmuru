<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Kalp Yaƒümuru</title>

<style>
:root {
  --bg: #fff0f6;
  --card: rgba(255,255,255,0.85);
  --primary: #ff4d6d;
  --text: #333;
}

body.dark { --bg:#111; --card:#1c1c1c; --primary:#ff4d6d; --text:#fff; }
body.neon { --bg:#050010; --card:#12002a; --primary:#00fff0; --text:#fff; }
body.pastel { --bg:#fef6ff; --card:#fff; --primary:#ff9acb; --text:#444; }
body.romantic { --bg:#ffe6ee; --card:#fff; --primary:#ff5d8f; --text:#333; }

* { box-sizing:border-box; font-family:'Segoe UI',system-ui; }

body {
  margin:0;
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.app {
  width:100%;
  max-width:360px;
  height:100%;
  max-height:700px;
  background:linear-gradient(180deg, rgba(255,255,255,.15), rgba(0,0,0,.05));
  border-radius:24px;
  padding:10px;
  display:flex;
  flex-direction:column;
  box-shadow:0 20px 50px rgba(0,0,0,.2);
}

/* HEADER */
.header {
  background:var(--card);
  border-radius:18px;
  padding:8px 12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:6px;
}

.header-left {
  font-weight:700;
  font-size:14px;
}

.header-right {
  display:flex;
  gap:6px;
}

.icon-btn {
  width:32px;
  height:32px;
  border-radius:50%;
  background:var(--primary);
  color:white;
  border:none;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:14px;
  cursor:pointer;
}

/* STATS */
.stats {
  display:flex;
  justify-content:space-between;
  background:var(--card);
  border-radius:16px;
  padding:6px 10px;
  font-size:12px;
  margin-bottom:6px;
}

/* GAME */
.game-wrap {
  flex:1;
  background:linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.12));
  border-radius:20px;
  position:relative;
  overflow:hidden;
}

/* PLAYER */
.player {
  position:absolute;
  bottom:8px;
  width:56px;
  height:56px;
  border-radius:50%;
  background:white;
  overflow:hidden;
  box-shadow:0 6px 15px rgba(0,0,0,.25);
  transition:.08s;
}

.player img {
  width:100%;
  height:100%;
  object-fit:cover;
}

/* FALLING ITEMS */
.item {
  position:absolute;
  width:42px;
  height:42px;
  border-radius:12px;
  overflow:hidden;
  background:white;
  box-shadow:0 4px 10px rgba(0,0,0,.25);
}

.item img {
  width:100%;
  height:100%;
  object-fit:cover;
}

/* BOMB */
.bomb {
  background:#000;
  color:white;
  font-weight:bold;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* START SCREEN */
.overlay {
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,.8));
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:14px;
  z-index:5;
  color:white;
  text-align:center;
  padding:20px;
}

.overlay h1 {
  font-size:22px;
  margin:0;
}

.overlay p {
  font-size:13px;
  opacity:.9;
}

.start-btn {
  background:var(--primary);
  color:white;
  border:none;
  border-radius:20px;
  padding:12px 24px;
  font-size:14px;
  font-weight:700;
  cursor:pointer;
}

/* THEMES PANEL */
.theme-panel {
  position:absolute;
  bottom:12px;
  left:50%;
  transform:translateX(-50%);
  background:var(--card);
  border-radius:20px;
  padding:6px 10px;
  display:flex;
  gap:8px;
}

.theme-btn {
  width:26px;
  height:26px;
  border-radius:50%;
  border:none;
  cursor:pointer;
}

.theme-romantic { background:#ff5d8f; }
.theme-dark { background:#000; }
.theme-pastel { background:#ffb3d9; }
.theme-neon { background:#00fff0; }

/* HEART BURST */
.heart {
  position:absolute;
  font-size:20px;
  animation:pop .8s ease-out forwards;
}

@keyframes pop {
  0% { transform:scale(0); opacity:1; }
  100% { transform:scale(1.6) translateY(-40px); opacity:0; }
}

/* GIFT SCREEN */
.gift-screen {
  position:absolute;
  inset:0;
  background:linear-gradient(180deg, rgba(255,0,100,.7), rgba(255,0,150,.9));
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:white;
  text-align:center;
  padding:20px;
  z-index:10;
}

.gift-screen h2 {
  font-size:22px;
}

.gift-screen p {
  font-size:14px;
  margin-top:10px;
}
</style>
</head>

<body class="romantic">

<div class="app">

  <!-- HEADER -->
  <div class="header">
    <div class="header-left">üíñ <span id="playerName">A≈ükƒ±m</span> i√ßin</div>
    <div class="header-right">
      <button class="icon-btn" id="soundBtn">üîä</button>
      <button class="icon-btn" id="giftBtn">üéÅ</button>
    </div>
  </div>

  <!-- STATS -->
  <div class="stats">
    <div>‚ù§Ô∏è Skor: <span id="score">0</span></div>
    <div>üî• Combo: <span id="combo">0</span></div>
    <div>üèÜ Rekor: <span id="best">0</span></div>
  </div>

  <!-- GAME -->
  <div class="game-wrap" id="game">
    <div class="player" id="player">
      <img src="images/player.png">
    </div>

    <!-- START -->
    <div class="overlay" id="startScreen">
      <h1>üíò Kalp Yaƒümuru</h1>
      <p>Sevgilinin fotoƒüraflarƒ±nƒ± yakala, bombalardan ka√ß!</p>
      <button class="start-btn" id="startBtn">Oyuna Ba≈üla</button>
    </div>

    <!-- THEMES -->
    <div class="theme-panel">
      <button class="theme-btn theme-romantic" data-theme="romantic"></button>
      <button class="theme-btn theme-pastel" data-theme="pastel"></button>
      <button class="theme-btn theme-neon" data-theme="neon"></button>
      <button class="theme-btn theme-dark" data-theme="dark"></button>
    </div>

    <!-- GIFT -->
    <div class="gift-screen" id="giftScreen">
      <h2>üéÅ Sana Bir Mesajƒ±m Var</h2>
      <p id="giftText">Seni her yakalayƒ±≈üƒ±mda kalbim biraz daha sana geliyor üíñ</p>
      <button class="start-btn" onclick="closeGift()">Kapat</button>
    </div>
  </div>

</div>

<!-- AUDIO -->
<audio id="catchSound" src="audios/catch.mp3"></audio>
<audio id="bombSound" src="audios/bomb.mp3"></audio>

<script>
/* ===== CONFIG ===== */
const playerName = "A≈ükƒ±m"; // m√º≈üteri adƒ±
const photos = [
  "images/photo1.jpg",
  "images/photo2.jpg",
  "images/photo3.jpg",
  "images/photo4.jpg",
  "images/photo5.jpg"
];

/* ===== ELEMENTS ===== */
const game = document.getElementById("game");
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const comboEl = document.getElementById("combo");
const bestEl = document.getElementById("best");
const startScreen = document.getElementById("startScreen");
const startBtn = document.getElementById("startBtn");
const soundBtn = document.getElementById("soundBtn");
const giftBtn = document.getElementById("giftBtn");
const giftScreen = document.getElementById("giftScreen");
const playerNameEl = document.getElementById("playerName");

const catchSound = document.getElementById("catchSound");
const bombSound = document.getElementById("bombSound");

/* ===== STATE ===== */
let gameRunning = false;
let score = 0;
let combo = 0;
let bestScore = localStorage.getItem("heartBest") || 0;
let muted = false;
let spawnInterval;

/* ===== INIT ===== */
playerNameEl.textContent = playerName;
bestEl.textContent = bestScore;

/* ===== THEME ===== */
document.querySelectorAll(".theme-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.body.className = btn.dataset.theme;
  });
});

/* ===== SOUND ===== */
soundBtn.onclick = () => {
  muted = !muted;
  soundBtn.textContent = muted ? "üîá" : "üîä";
};

function play(sound) {
  if (!muted) {
    sound.currentTime = 0;
    sound.play();
  }
}

/* ===== PLAYER MOVE ===== */
let playerX = game.clientWidth / 2 - 28;
player.style.left = playerX + "px";

game.addEventListener("touchmove", e => {
  if (!gameRunning) return;
  const rect = game.getBoundingClientRect();
  const x = e.touches[0].clientX - rect.left - 28;
  movePlayer(x);
});

game.addEventListener("mousemove", e => {
  if (!gameRunning) return;
  const rect = game.getBoundingClientRect();
  const x = e.clientX - rect.left - 28;
  movePlayer(x);
});

function movePlayer(x) {
  const max = game.clientWidth - 56;
  playerX = Math.max(0, Math.min(max, x));
  player.style.left = playerX + "px";
}

/* ===== START GAME ===== */
startBtn.onclick = startGame;

function startGame() {
  startScreen.style.display = "none";
  score = 0;
  combo = 0;
  updateUI();
  gameRunning = true;
  spawnInterval = setInterval(spawnItem, 850);
}

/* ===== SPAWN ===== */
function spawnItem() {
  if (!gameRunning) return;

  const item = document.createElement("div");
  const isBomb = Math.random() < 0.18;

  item.className = "item";

  if (isBomb) {
    item.classList.add("bomb");
    item.textContent = "üí£";
  } else {
    const img = document.createElement("img");
    img.src = photos[Math.floor(Math.random() * photos.length)];
    item.appendChild(img);
  }

  const x = Math.random() * (game.clientWidth - 42);
  item.style.left = x + "px";
  item.style.top = "-50px";
  game.appendChild(item);

  let y = -50;
  const speed = 2.2 + Math.random() * 1.4;

  const fall = setInterval(() => {
    y += speed;
    item.style.top = y + "px";

    if (y > game.clientHeight) {
      clearInterval(fall);
      item.remove();
      combo = 0;
      updateUI();
    }

    if (checkCollision(item)) {
      clearInterval(fall);
      item.remove();
      if (isBomb) {
        play(bombSound);
        combo = 0;
        score = Math.max(0, score - 2);
      } else {
        play(catchSound);
        combo++;
        score += 1 + Math.floor(combo / 3);
        spawnHeart();
      }
      updateUI();
    }
  }, 16);
}

/* ===== COLLISION ===== */
function checkCollision(item) {
  const iRect = item.getBoundingClientRect();
  const pRect = player.getBoundingClientRect();
  return !(
    iRect.bottom < pRect.top ||
    iRect.top > pRect.bottom ||
    iRect.right < pRect.left ||
    iRect.left > pRect.right
  );
}

/* ===== HEART ANIMATION ===== */
function spawnHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.textContent = "‚ù§Ô∏è";
  heart.style.left = playerX + 20 + "px";
  heart.style.top = (game.clientHeight - 90) + "px";
  game.appendChild(heart);
  setTimeout(() => heart.remove(), 800);
}

/* ===== UI ===== */
function updateUI() {
  scoreEl.textContent = score;
  comboEl.textContent = combo;
  if (score > bestScore) {
    bestScore = score;
    localStorage.setItem("heartBest", bestScore);
    bestEl.textContent = bestScore;
  }
}

/* ===== GIFT ===== */
giftBtn.onclick = () => {
  giftScreen.style.display = "flex";
};

function closeGift() {
  giftScreen.style.display = "none";
}
</script>

</body>
</html>
