<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Kalp Yaƒümuru üíñ</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}

:root{
  --bg1:#ff7abf;
  --bg2:#ff3c86;
  --panel:rgba(255,255,255,.25);
  --glass:rgba(255,255,255,.22);
  --accent:#ff2f7a;
}

body.romantic{
  --bg1:#ff9acb;
  --bg2:#ff3c86;
  --accent:#ff2f7a;
}
body.pastel{
  --bg1:#c7d2fe;
  --bg2:#fbcfe8;
  --accent:#7c3aed;
}
body.dark{
  --bg1:#141414;
  --bg2:#2c2c2c;
  --accent:#f472b6;
}
body.neon{
  --bg1:#020024;
  --bg2:#090979;
  --accent:#00ffff;
}

body{
  background:radial-gradient(circle at top,var(--bg1),var(--bg2));
  height:100vh;
  overflow:hidden;
  touch-action:none;
  transition:.4s;
}

#game{
  position:relative;
  width:100vw;
  height:100svh;
  max-width:420px;
  margin:0 auto;
  background:
    linear-gradient(180deg,rgba(255,255,255,.22),rgba(255,255,255,.05)),
    url("images/bg.jpg") center/cover no-repeat;
  overflow:hidden;
  border-radius:22px;
  box-shadow:0 20px 50px rgba(0,0,0,.35);
}

/* ---------- HUD ---------- */
#hud{
  position:absolute;
  top:10px;
  left:10px;
  right:10px;
  display:flex;
  justify-content:space-between;
  gap:6px;
  z-index:5;
}

.hud-pill{
  background:var(--glass);
  backdrop-filter:blur(14px);
  border-radius:999px;
  padding:8px 14px;
  font-size:14px;
  font-weight:900;
  color:white;
  display:flex;
  align-items:center;
  gap:6px;
  box-shadow:0 6px 18px rgba(255,80,150,.35);
}

.hud-pill span{
  font-size:15px;
}

/* ---------- CONTROLS ---------- */
#controls{
  position:absolute;
  bottom:12px;
  left:12px;
  right:12px;
  display:flex;
  justify-content:space-between;
  gap:8px;
  z-index:6;
}

.ctrl-btn{
  flex:1;
  background:var(--glass);
  backdrop-filter:blur(14px);
  border-radius:16px;
  padding:10px;
  font-size:12px;
  font-weight:900;
  color:white;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  box-shadow:0 8px 22px rgba(0,0,0,.25);
}

/* ---------- PLAYER ---------- */
#player{
  position:absolute;
  bottom:20px;
  width:82px;
  height:82px;
  background:url("images/player.png") center/contain no-repeat;
  filter:drop-shadow(0 12px 24px rgba(255,0,120,.6));
  transition:transform .08s ease;
  pointer-events:none;
}

#player.catch{
  transform:scale(1.12);
}

/* ---------- ITEMS ---------- */
.item{
  position:absolute;
  width:64px;
  height:64px;
  border-radius:18px;
  background-size:cover;
  background-position:center;
  box-shadow:0 10px 28px rgba(0,0,0,.3);
  animation:float 2s ease-in-out infinite alternate;
}

@keyframes float{
  from{transform:translateY(0)}
  to{transform:translateY(8px)}
}

.bomb{
  background:url("images/bomb.png") center/contain no-repeat;
  filter:drop-shadow(0 8px 18px rgba(255,0,0,.5));
}

/* ---------- OVERLAYS ---------- */
.overlay{
  position:absolute;
  inset:0;
  background:linear-gradient(180deg,rgba(255,60,150,.85),rgba(120,0,80,.95));
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:white;
  text-align:center;
  z-index:10;
  padding:22px;
}

.overlay-card{
  background:rgba(255,255,255,.22);
  backdrop-filter:blur(18px);
  border-radius:28px;
  padding:26px 22px;
  width:100%;
  max-width:340px;
  box-shadow:0 25px 60px rgba(0,0,0,.45);
  animation:pop .4s ease;
}

@keyframes pop{
  from{transform:scale(.9);opacity:0}
  to{transform:scale(1);opacity:1}
}

.overlay h1{
  font-size:26px;
  margin-bottom:6px;
  font-weight:900;
}

.overlay p{
  font-size:14px;
  opacity:.95;
  margin-bottom:16px;
}

.overlay button{
  width:100%;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  border:none;
  color:white;
  padding:14px;
  border-radius:16px;
  font-size:15px;
  font-weight:900;
  box-shadow:0 8px 22px rgba(255,60,130,.5);
}

/* ---------- EFFECTS ---------- */
.heart-burst{
  position:absolute;
  width:14px;
  height:14px;
  background:radial-gradient(circle at 30% 30%,#fff,var(--accent));
  border-radius:50%;
  pointer-events:none;
  animation:burst .6s ease-out forwards;
}

@keyframes burst{
  from{transform:translate(0,0) scale(1);opacity:1}
  to{transform:translate(var(--x),var(--y)) scale(.1);opacity:0}
}

/* ---------- GAME OVER ---------- */
#finalScore{
  font-size:26px;
  font-weight:900;
  color:white;
}
</style>
</head>

<body class="romantic">

<div id="game">

  <!-- HUD -->
  <div id="hud">
    <div class="hud-pill">üíñ <span id="score">0</span></div>
    <div class="hud-pill">üî• <span id="combo">0</span></div>
    <div class="hud-pill">üèÜ <span id="best">0</span></div>
  </div>

  <!-- PLAYER -->
  <div id="player"></div>

  <!-- CONTROLS -->
  <div id="controls">
    <div class="ctrl-btn" id="soundBtn">üîä Ses</div>
    <div class="ctrl-btn" id="themeBtn">üé® Tema</div>
  </div>

  <!-- START / GIFT -->
  <div id="startScreen" class="overlay">
    <div class="overlay-card">
      <h1>üíå <span id="loverName">A≈ükƒ±m</span> ƒ∞√ßin</h1>
      <p id="giftText">Bu oyunu sana √∂zel hazƒ±rladƒ±m üíñ<br>Kalplerimizi birlikte yakalayalƒ±m üòò</p>
      <button id="startBtn">Oyuna Ba≈üla</button>
    </div>
  </div>

  <!-- GAME OVER -->
  <div id="gameOver" class="overlay" style="display:none">
    <div class="overlay-card">
      <h1>üíñ Harika Oynadƒ±n <span id="finalName"></span>!</h1>
      <p>Skorun</p>
      <div id="finalScore">0</div>
      <button id="restartBtn">Tekrar Oyna</button>
    </div>
  </div>

</div>

<audio id="catchSound" src="audios/catch.mp3"></audio>
<audio id="bombSound" src="audios/bomb.mp3"></audio>
<audio id="bgSound" src="audios/bg.mp3" loop></audio>

<script>
/* ===========================
   üîß SATI≈û ƒ∞√áƒ∞N AYARLAR
=========================== */

// üëâ M√ú≈ûTERƒ∞ ADI
const CUSTOMER_NAME = "Umut";

// üëâ HEDƒ∞YE MESAJI
const GIFT_MESSAGE = "Bu oyunu sana √∂zel hazƒ±rladƒ±m üíñ\nKalplerimizi birlikte yakalayalƒ±m üòò";

// üëâ FOTOƒûRAFLAR
const images = [
  "images/love1.jpg",
  "images/love2.jpg",
  "images/love3.jpg"
];

/* ===========================
   üéÆ OYUN MOTORU
=========================== */

const game = document.getElementById("game");
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const comboEl = document.getElementById("combo");
const bestEl = document.getElementById("best");
const startScreen = document.getElementById("startScreen");
const gameOver = document.getElementById("gameOver");
const finalScoreEl = document.getElementById("finalScore");
const loverNameEl = document.getElementById("loverName");
const finalNameEl = document.getElementById("finalName");

const soundBtn = document.getElementById("soundBtn");
const themeBtn = document.getElementById("themeBtn");

const catchSound = document.getElementById("catchSound");
const bombSound = document.getElementById("bombSound");
const bgSound = document.getElementById("bgSound");

loverNameEl.textContent = CUSTOMER_NAME;
finalNameEl.textContent = CUSTOMER_NAME;
document.getElementById("giftText").innerHTML = GIFT_MESSAGE.replace(/\n/g,"<br>");

let gameW, gameH;
let playerX = 0;
let score = 0;
let combo = 0;
let speed = 2.1;
let running = false;
let spawnTimer, moveTimer;
let soundOn = true;

const themes = ["romantic","pastel","dark","neon"];
let themeIndex = 0;

/* ---------- BEST SCORE ---------- */
let bestScore = localStorage.getItem("kalpBest") || 0;
bestEl.textContent = bestScore;

/* ---------- RESIZE ---------- */
function resize(){
  gameW = game.clientWidth;
  gameH = game.clientHeight;
}
window.addEventListener("resize", resize);
resize();

/* ---------- GAME FLOW ---------- */
function startGame(){
  score = 0;
  combo = 0;
  speed = 2.1;
  running = true;
  scoreEl.textContent = 0;
  comboEl.textContent = 0;
  startScreen.style.display = "none";
  gameOver.style.display = "none";

  playerX = gameW / 2 - player.offsetWidth / 2;
  player.style.left = playerX + "px";

  if(soundOn){
    bgSound.currentTime = 0;
    bgSound.play().catch(()=>{});
  }

  spawnTimer = setInterval(spawnItem, 820);
  moveTimer = setInterval(moveItems, 16);
}

function endGame(){
  running = false;
  clearInterval(spawnTimer);
  clearInterval(moveTimer);
  document.querySelectorAll(".item").forEach(e=>e.remove());
  bgSound.pause();
  finalScoreEl.textContent = score;

  if(score > bestScore){
    bestScore = score;
    localStorage.setItem("kalpBest", bestScore);
    bestEl.textContent = bestScore;
  }

  gameOver.style.display = "flex";
}

/* ---------- SPAWN ---------- */
function spawnItem(){
  if(!running) return;
  const el = document.createElement("div");
  el.className = "item";

  const isBomb = Math.random() < 0.25;
  if(isBomb){
    el.classList.add("bomb");
  } else {
    const img = images[Math.floor(Math.random()*images.length)];
    el.style.backgroundImage = `url(${img})`;
  }

  el.dataset.type = isBomb ? "bomb" : "love";
  el.style.left = Math.random() * (gameW - 64) + "px";
  el.style.top = "-70px";
  el.dataset.y = -70;
  game.appendChild(el);
}

/* ---------- MOVE ---------- */
function moveItems(){
  if(!running) return;
  document.querySelectorAll(".item").forEach(el=>{
    let y = parseFloat(el.dataset.y);
    y += speed;
    el.dataset.y = y;
    el.style.top = y + "px";

    if(checkCollision(el)){
      if(el.dataset.type === "bomb"){
        if(soundOn){
          bombSound.currentTime = 0;
          bombSound.play().catch(()=>{});
        }
        endGame();
      } else {
        if(soundOn){
          catchSound.currentTime = 0;
          catchSound.play().catch(()=>{});
        }
        score += 10 + combo * 3;
        combo++;
        speed += 0.05;
        scoreEl.textContent = score;
        comboEl.textContent = combo;
        heartBurst(el);
        player.classList.add("catch");
        setTimeout(()=>player.classList.remove("catch"),120);
        el.remove();
      }
    }

    if(y > gameH + 80){
      combo = 0;
      comboEl.textContent = combo;
      el.remove();
    }
  });
}

/* ---------- COLLISION ---------- */
function checkCollision(el){
  const p = player.getBoundingClientRect();
  const i = el.getBoundingClientRect();
  return !(i.right < p.left || i.left > p.right || i.bottom < p.top || i.top > p.bottom);
}

/* ---------- TOUCH MOVE ---------- */
game.addEventListener("pointermove", e=>{
  if(!running) return;
  const rect = game.getBoundingClientRect();
  let x = e.clientX - rect.left - player.offsetWidth/2;
  x = Math.max(0, Math.min(gameW - player.offsetWidth, x));
  player.style.left = x + "px";
});

/* ---------- HEART BURST ---------- */
function heartBurst(el){
  for(let i=0;i<10;i++){
    const h = document.createElement("div");
    h.className = "heart-burst";
    const x = Math.random()*60-30;
    const y = Math.random()*60-30;
    h.style.setProperty("--x", x+"px");
    h.style.setProperty("--y", y+"px");
    h.style.left = el.offsetLeft + el.offsetWidth/2 + "px";
    h.style.top = el.offsetTop + el.offsetHeight/2 + "px";
    game.appendChild(h);
    setTimeout(()=>h.remove(),600);
  }
}

/* ---------- CONTROLS ---------- */
soundBtn.onclick = ()=>{
  soundOn = !soundOn;
  soundBtn.textContent = soundOn ? "üîä Ses" : "üîá Sessiz";
  if(!soundOn) bgSound.pause();
};

themeBtn.onclick = ()=>{
  themeIndex = (themeIndex + 1) % themes.length;
  document.body.className = themes[themeIndex];
};

/* ---------- BUTTONS ---------- */
document.getElementById("startBtn").onclick = startGame;
document.getElementById("restartBtn").onclick = startGame;
</script>

</body>
</html>
